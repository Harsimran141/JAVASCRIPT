<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div class="w-[550px] h-[450px] bg-gray-200 m-auto mt-4 rounded-md">
        <h1 class="text-center text-2xl text-blue-600 font-bold">User Chat</h1>
        <div class="mt-4">
            <div id="display">
            </div>

            <input id="input" class="ml-4 mt-20 ml-20 w-[400px] h-full rounded-md" type="text">
            <button id="btn" class="bg-blue-500 p-2 rounded-md ml-2 text-white font-medium">Send</button>
        </div>
    </div>
    <script>
        const display = document.getElementById("display");
        let ustore = localStorage.getItem("record");
        let token = JSON.parse(ustore);
        const input = document.getElementById("input");
        const send = document.getElementById("btn");
        send.addEventListener('click', () => {
            let messent = input.value;
            sendMessage(messent)
        })
        async function createchat() {
            let option = {
                method: "POST",
                headers: {
                    accept: 'application/json',
                    'content-type': 'application/json',
                    Authorization: `Bearer ${token.data.accessToken}`,
                }
            }
            let storeid = localStorage.getItem("reciverid");
            try {
                let response = await fetch(`https://api.freeapi.app/api/v1/chat-app/chats/c/${storeid}`, option)
                let chat = await response.json()
                console.log("os",chat);
                let chatid = chat.data._id
                console.log("idd",chatid);
                localStorage.setItem("chatid",chatid)
            } catch (error) {
            console.log(error);

            }
        }
        createchat()
        async function sendMessage(message) {
            console.log("mess",message);
           try{
            let response = await fetch(`https://api.freeapi.app/api/v1/chat-app/messages/${chatid}`)
            let uresponse = await response.json()


        }catch(e){
        console.log(e);
        } 
        }

    </script>
</body>

</html>